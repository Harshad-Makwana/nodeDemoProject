<!DOCTYPE html>
<html lang="en">
<head>
    {{>header}}
</head>
<body>
    {{>navbar}}
    <div class="container">  
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                <th scope="col">Email</th>
                <th scope="col">Name</th>
                <th scope="col">Phone number</th>
                <th scope="col">DOB</th>
                </tr>
            </thead>
            <tbody id="tbody">
            </tbody>
        </table>

        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-end">
                <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">Next</a></li>
            </ul>
        </nav>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function() {

        load_data();

        function load_data() {
            $.ajax({
                url: "user/data",
                method: "POST",
                data: {action:"fetch"},
                dataType:"JSON",
                success:function(data) {
                    let tableData = '';
                    if(data.length > 0) {       
                        for(let count = 0; count < data.length; count++) {
                            tableData += `
                                <tr>
                                    <th scope="row">` + data[count].email + `</th>
                                    <td>` + data[count].name + `</td>
                                    <td>` + data[count].phone_number + `</td>
                                    <td>` +  new Date(data[count].dob).toLocaleDateString() + `</td>
                                </tr>
                            `;
                        }
                    }
                    $('#tbody').html(tableData)
                }
            });
        }
    })
</script>
</html>